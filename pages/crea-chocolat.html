<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Course" />

    <link rel="stylesheet" href="../css/style.css">

    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/css/lightbox.min.css" rel="stylesheet">




    
    <script src="/js/script.js" defer></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script
    type="module"
    src="https://unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.esm.js"></script>
   <script
    nomodule=""
    src="https://unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.js"></script>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Unica+One&display=swap" rel="stylesheet">



    <title>Ricardo Nozaki Pastry Chef</title>
</head>

<body>
    <header class="header ">
        <a href="../index.html">
            <img class="logo" src="../img/base/logo/lo2.png" alt="logo" id="logo">
        </a>
      
        
        
        <nav class="main-nav">
            <ul class="main-nav-list">
                <ul class="main-nav-list">
                    <li><a class="main-nav-link" href="/index.html#aboutme"> Chef</a></li>
                    <li><a class="main-nav-link" href="/index.html#creations">Creacoes</a></li>
                    <li><a class="main-nav-link" href="/index.html#recipe">Receitas</a></li>
                    <li><a class="main-nav-link nav-cta" href="/index.html#ebooks">E-book</a></li>
                    <li><a class="main-nav-link" href="/pages/contato.html">Contato</a></li>
                    <li><a class="main-nav-link" href="/login.html">Login</a></li>
                    <li><a id="logout-link"  class="main-nav-link" href="#"   style="display: none;">Sair</a></li>
    
                </ul>
        </nav>
   <!-- Botão de menu hambúrguer para telas menores -->
   <button class="hamburger" aria-label="Menu" aria-expanded="false">
    <ion-icon name="menu-outline" class="icon-menu"></ion-icon>
    <ion-icon name="close-outline" class="icon-close"></ion-icon>

</button>
        
        
    </header>
   <div class="container-gallery">
    <section class="section-creations" id="creations">
           
        <span class="subheading subheading--1 flash-effect" >Cakes</span>
        <span class="subheading subheading--2 flash-effect-2">Cakes</span>
        <span class="subheading subheading--3 flash-effect">Cakes</span>
        <div class=" section-creations__gallery grid-3cols ">

            
            <a href="../img/creation-main/creation-chocolat/1.png" class="gallery-link no-background" data-lightbox="models" data-title="Caption1">
                <figure class="gallery-item">
                    <img src="../img/creation-main/creation-chocolat/1.png" alt="photo2" class="">
                </figure>
            </a>

            <a href="../img/creation-main/creation-chocolat/4.png" class="gallery-link no-background" data-lightbox="models" data-title="Caption1">
                <figure class="gallery-item">
                    <img src="../img/creation-main/creation-chocolat/4.png" alt="photo2" class="">
                </figure>
            </a>

            <a href="../img/creation-main/creation-chocolat/3.png" class="gallery-link no-background" data-lightbox="models" data-title="Caption1">
                <figure class="gallery-item">
                    <img src="../img/creation-main/creation-chocolat/3.png" alt="photo2" class="">
                </figure>
            </a>
            <a href="../img/creation-main/creation-chocolat/5.png" class="gallery-link no-background" data-lightbox="models" data-title="Caption1">
                <figure class="gallery-item">
                    <img src="../img/creation-main/creation-chocolat/5.png" alt="photo2" class="">
                </figure>
            </a>
          
            
       
            

        </div>
        <form action="http://localhost:3001/upload" method="POST" enctype="multipart/form-data" style="display: none;">
            <input type="hidden" name="page" value="creation-chocolat"> <!-- Verifique se o valor está correto -->
            <input type="file" name="image" accept="image/*" required>
            <button type="submit">Upload de Imagem</button>
        </form>
        
        
   
    </section>

   </div>
    
    

   
    <footer class="footer ">
        <div class=" grid-5cols">

            <div class="logo-col">
                <a href="../index.html">
                    <img src="../img/base/logo/lo2.png" alt="logo" class="logo">
                </a>
             
            </div>
    
            <div class="address-col">
                <p class="footer-heading">Contate-nos</p>
                <a class="footer-link" href="mailto:elitecakes@br.com"><ion-icon name="mail"></ion-icon> ricardonozaki@gmail.com</a> 
            </div>

            

            <div class="address-col">
                <p class="footer-heading">Links Uteis</p>
                <ul>
                    <li><a class="footer-link" href="#recipe">Receitas</a></li>
                    <li><a class="footer-link" href="#ebooks">E-books</a></li>
                    <li><a class="footer-link" href="#contact">Contato</a></li>   
                </ul>
            </div>

            <div class="social-links">
                <p class="footer-heading">Siga-me:</p>

                <ul class="social-media-footer ">
                    <li><a href="https://www.instagram.com/andreahcodes/" target="_blank" class="icon"><ion-icon
                        name="logo-instagram"></ion-icon></a></li>

                    <li><a href="https://www.linkedin.com/in/andreahcodes/" target="_blank" class="icon"><ion-icon
                                name="logo-facebook"></ion-icon></a></li>


                </ul>
            </div>
           
          
           
           
        </div>
  
        <p class="copyright"> &copy; 2023 Ricardo Nozaki.Todos os direitos reservados. Site por <a href="https://andreanozaki.com/">AN Sites</a></p>

    
    </footer>
    
           
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/js/lightbox.min.js" integrity="sha512-Ixzuzfxv1EqafeQlTCufWfaC6ful6WFqIz4G+dWvK0beHw0NVJwvCKSgafpy5gwNqKmgUfIBraVwkKI+Cz0SEQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="/js/cookie-banner.js" defer></script>

    <script>
document.addEventListener('DOMContentLoaded', () => {
  // Verificação de login do chef usando sessionStorage
  const isChef = sessionStorage.getItem('isChef') === 'true';
  console.log('isChef:', isChef); // Verifique no console se o valor está correto

  // Mostrar o formulário de upload se o usuário for o chef
  if (isChef) {
    document.querySelector('form[action="http://localhost:3001/upload"]').style.display = 'block';
  }

  fetch('http://localhost:3001/images/creation-chocolat')
    .then(response => response.json())
    .then(data => {
      console.log('Imagens carregadas:', data); // Verifica se os dados incluem `id`
      const gallery = document.querySelector('.section-creations__gallery');
      if (gallery) {
        data.forEach(image => {
          const figureElement = document.createElement('figure');
          figureElement.classList.add('gallery-item');

          const imgElement = document.createElement('img');
          imgElement.src = image.image_path;
          imgElement.alt = 'Imagem carregada';
          imgElement.classList.add('gallery-item-img');

          figureElement.appendChild(imgElement);

          // Adicionar o botão de deletar apenas se o usuário for o chef
          if (isChef) {
            const deleteButton = document.createElement('button');
            deleteButton.textContent = 'Deletar';
            deleteButton.classList.add('delete-button');
            deleteButton.onclick = (event) => {
              event.preventDefault();
              event.stopPropagation();
              console.log('ID da imagem para exclusão:', image.id);
              deleteImage(image.id);
            };

            figureElement.appendChild(deleteButton);
          }

          const linkElement = document.createElement('a');
          linkElement.href = image.image_path;
          linkElement.classList.add('gallery-link', 'no-background');
          linkElement.setAttribute('data-lightbox', 'models');
          linkElement.appendChild(figureElement);

          gallery.appendChild(linkElement);
        });
      }
    })
    .catch(error => console.error('Erro ao carregar imagens:', error));
});

function deleteImage(imageId) {
  fetch(`/delete-image/${imageId}`, {
    method: 'DELETE'
  })
  .then(response => {
    if (response.ok) {
      alert('Imagem deletada com sucesso.');
      location.reload(); // Atualiza a página para refletir a exclusão
    } else {
      alert('Erro ao deletar a imagem.');
    }
  })
  .catch(error => {
    console.error('Erro:', error);
    alert('Erro ao deletar a imagem.');
  });
}

    </script>
      

</body>
</html>